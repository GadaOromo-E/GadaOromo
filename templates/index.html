<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gada Oromo Dictionary</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">

  <header class="topbar">
    <div class="brand">
      <h1>Gada Oromo Dictionary</h1>
      <p class="tagline">Your global Oromo ‚Üî English community dictionary</p>
    </div>
  </header>

  <nav class="nav">
    <a class="nav-link" href="/">Home</a>
    <a class="nav-link" href="/translate">Translate</a>
    <a class="nav-link" href="/submit">Submit Word</a>
    <a class="nav-link" href="/submit_phrase">Submit Phrase</a>
    <a class="nav-link" href="/admin">Admin</a>
  </nav>

  <section class="card">
    <h2>Search Dictionary</h2>

    <form method="POST" id="searchForm" class="row" style="align-items:stretch;">
      <input type="text" name="word" id="searchWord" placeholder="Type English or Oromo word..." required>
      <button type="submit">Search</button>
    </form>

    {% if result %}
      <div class="result-box">
        <b>English:</b> {{ result[0] }} <br>
        <b>Oromo:</b> {{ result[1] }}
      </div>

      <!-- ===== Community Audio (Word exact match) ===== -->
      {% if result_id %}
        <div class="card" style="margin-top:14px;">
          <h2 style="margin-top:0;">üéß Community Audio</h2>

          {% if audio %}
            {% if audio.oromo %}
              <div class="subtle">Oromo audio</div>
              <audio controls style="width:100%; margin-top:6px;">
                <source src="{{ url_for('static', filename=audio.oromo) }}">
              </audio>
            {% endif %}

            {% if audio.english %}
              <div class="subtle" style="margin-top:10px;">English audio</div>
              <audio controls style="width:100%; margin-top:6px;">
                <source src="{{ url_for('static', filename=audio.english) }}">
              </audio>
            {% endif %}
          {% endif %}

          <div class="small-actions" style="margin-top:12px;">
            <a class="btn" href="/upload_audio/word/{{ result_id }}/oromo">üéô Upload Oromo audio</a>
            <a class="btn" href="/upload_audio/word/{{ result_id }}/english">üéô Upload English audio</a>
          </div>

          <div class="muted" style="margin-top:8px; font-size:14px;">
            Audio becomes public after admin approval.
          </div>
        </div>
      {% endif %}

    {% elif result is not none %}
      <div class="result-box">No exact match found.</div>
    {% endif %}

    {% if suggestions %}
      <div style="margin-top:14px;">
        <h2>Did you mean‚Ä¶</h2>

        {% if suggestions.en %}
          <div class="subtle">English suggestions</div>
          <div class="chips">
            {% for s in suggestions.en.closest %}<span class="chip" onclick="useSuggestion('{{ s|e }}')">{{ s }}</span>{% endfor %}
            {% for s in suggestions.en.prefix %}<span class="chip" onclick="useSuggestion('{{ s|e }}')">{{ s }}</span>{% endfor %}
            {% for s in suggestions.en.partial %}<span class="chip" onclick="useSuggestion('{{ s|e }}')">{{ s }}</span>{% endfor %}
          </div>
        {% endif %}

        {% if suggestions.om %}
          <div class="subtle" style="margin-top:10px;">Oromo suggestions</div>
          <div class="chips">
            {% for s in suggestions.om.closest %}<span class="chip" onclick="useSuggestion('{{ s|e }}')">{{ s }}</span>{% endfor %}
            {% for s in suggestions.om.prefix %}<span class="chip" onclick="useSuggestion('{{ s|e }}')">{{ s }}</span>{% endfor %}
            {% for s in suggestions.om.partial %}<span class="chip" onclick="useSuggestion('{{ s|e }}')">{{ s }}</span>{% endfor %}
          </div>
        {% endif %}
      </div>
    {% endif %}

    <div class="quick-actions">
      <a class="btn primary" href="/translate">üåç Translator</a>
      <a class="btn" href="/submit">‚ûï Add Word</a>
      <a class="btn" href="/submit_phrase">‚ûï Add Phrase</a>
    </div>
  </section>

  {% if trending %}
    <section class="card">
      <h2>üî• Trending Searches</h2>
      <div class="chips">
        {% for t in trending %}
          <span class="chip" onclick="useSuggestion('{{ t[0]|e }}')">{{ t[0] }} <span class="muted">({{ t[1] }})</span></span>
        {% endfor %}
      </div>
      <div class="subtle" style="margin-top:8px;">Tap a trending word to search it.</div>
    </section>
  {% endif %}

  <section class="card">
    <h2>Approved Words</h2>

    {% if words and words|length > 0 %}
      <div class="word-list">
        {% for w in words %}
          <div class="word-row">
            <span><b>{{ w[0] }}</b></span>
            <span class="muted">‚Üí</span>
            <span><b>{{ w[1] }}</b></span>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="muted">No approved words yet. Be the first to submit!</p>
    {% endif %}
  </section>

  <footer class="footer">
    <p>¬© 2026 GadaOromo ‚Äî Open community dictionary</p>
  </footer>

</div>

<script>
function useSuggestion(text){
  const inp=document.getElementById("searchWord");
  if(inp) inp.value=text;
  document.getElementById("searchForm").submit();
}
</script>

</body>
</html>




