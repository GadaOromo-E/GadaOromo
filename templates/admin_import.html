<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Import Words | Admin</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
<div class="container">

  <div class="topbar">
    <div class="title-row">
      <div>
        <h2 style="margin:0;">ðŸ“¥ Import English â†’ Oromo (GitHub One-Click)</h2>
        <div class="subtle">
          One click import: max <b>2000</b> words from GitHub, sent as <b>10</b> Google calls (batch size <b>200</b>).
          Words are saved as <b>pending</b> for approval.
        </div>
      </div>
      <a class="btn danger" href="/dashboard">â¬… Back</a>
    </div>
  </div>

  {% if msg %}
    <div class="result-box" id="resultBox">{{ msg }}</div>
  {% endif %}

  <div class="card">
    <!-- IMPORTANT: action is /admin/import_github and NO file input -->
    <form id="importForm" method="POST" action="/admin/import_github" novalidate autocomplete="off">
      <button id="importBtn" type="submit">ðŸš€ Import Now (One Click)</button>
      <div id="statusLine" class="muted" style="margin-top:10px; font-size:14px;"></div>
    </form>

    <div class="muted" style="margin-top:10px; font-size:14px;">
      This button downloads your word list from <b>WORDLIST_URL</b> (Render env var).
      The GitHub file must be a <b>raw .txt</b> with <b>one English word per line</b>.
    </div>
  </div>

</div>

<script>
  (function () {
    const form = document.getElementById("importForm");
    const btn = document.getElementById("importBtn");
    const status = document.getElementById("statusLine");
    if (!form || !btn || !status) return;

    form.addEventListener("submit", function () {
      btn.disabled = true;
      btn.textContent = "Importingâ€¦";
      status.textContent = "Downloading from GitHub, translating in 200Ã—10 batches, saving as pendingâ€¦";
    });
  })();
</script>

</body>
</html>


